---
phase: 05-fallback-page-component
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/AppStoreBadges/AppStoreBadges.tsx
  - src/components/AppStoreBadges/AppStoreBadges.module.css
  - src/components/AppStoreBadges/index.ts
  - src/app/download/page.tsx
  - src/app/download/page.module.css
autonomous: true
requirements: [PAGE-01, PAGE-02, PAGE-03, PAGE-04]

must_haves:
  truths:
    - "Desktop user visiting /download sees StreetFeast logo, heading, and both App Store and Google Play badge buttons"
    - "Clicking the App Store badge opens the Apple App Store link in a new tab"
    - "Clicking the Google Play badge opens the Google Play link in a new tab"
    - "iOS Safari user on desktop sees the Apple Smart App Banner at the top of the browser"
    - "The page renders with zero client-side JavaScript — no hydration, no useEffect, no event handlers"
  artifacts:
    - path: "src/components/AppStoreBadges/AppStoreBadges.tsx"
      provides: "Reusable badge pair component with App Store and Google Play links"
      exports: ["default"]
    - path: "src/components/AppStoreBadges/index.ts"
      provides: "Barrel export for AppStoreBadges component"
      exports: ["default"]
    - path: "src/app/download/page.tsx"
      provides: "Server component page with metadata export including itunes.appId"
      exports: ["metadata", "default"]
    - path: "src/app/download/page.module.css"
      provides: "Scoped styles for download page layout"
    - path: "src/components/AppStoreBadges/AppStoreBadges.module.css"
      provides: "Scoped styles for badge pair layout"
  key_links:
    - from: "src/app/download/page.tsx"
      to: "src/components/AppStoreBadges/AppStoreBadges.tsx"
      via: "import default"
      pattern: "import AppStoreBadges"
    - from: "src/components/AppStoreBadges/AppStoreBadges.tsx"
      to: "src/constants/links.ts"
      via: "import { APP_STORE_LINK, GOOGLE_PLAY_LINK }"
      pattern: "APP_STORE_LINK.*GOOGLE_PLAY_LINK"
    - from: "src/app/download/page.tsx"
      to: "<meta name='apple-itunes-app'>"
      via: "export const metadata with itunes.appId"
      pattern: "itunes.*appId.*6749815073"
---

<objective>
Create the /download fallback page and a reusable AppStoreBadges component. Desktop users and undetected devices that pass through the Phase 4 middleware see a branded landing page with both App Store and Google Play download badges. The page is a pure server component with zero client JavaScript, and includes the Apple Smart App Banner meta tag for iOS Safari.

Purpose: Complete the download funnel — mobile users get auto-redirected (Phase 4), everyone else lands here with clear download options.
Output: `/download` route serving a branded, zero-JS page with store badges and Smart App Banner.
</objective>

<execution_context>
@/Users/jacobfinn/.claude/get-shit-done/workflows/execute-plan.md
@/Users/jacobfinn/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-fallback-page-component/05-RESEARCH.md

@src/constants/links.ts
@src/constants/colors.ts
@src/components/HeroHeader/HeroHeader.tsx

<interfaces>
<!-- Key types and contracts the executor needs. Extracted from codebase. -->
<!-- Executor should use these directly — no codebase exploration needed. -->

From src/constants/links.ts:
```typescript
export const APP_STORE_LINK = "https://apps.apple.com/us/app/streetfeast/id6749815073";
export const GOOGLE_PLAY_LINK = "https://play.google.com/store/apps/details?id=com.streetfeast.streetfeast";
```

From src/constants/colors.ts:
```typescript
export const Colors = {
  main: { white: "#FCFCFC", gray: "#F5F5F5", orange: "#ED6A00" },
  primary: ["#FCFCFC", "#C6C6C6", "#808080", "#636363", "#1E1E1F"],
  // ...
}
```

Badge image props (established pattern from HeroHeader):
```typescript
// App Store badge — SVG, auto-unoptimized by next/image
<Image src="/app-store-badge.svg" alt="Download on the App Store" width={180} height={63} />

// Google Play badge — PNG, standard optimization
<Image src="/google-play-badge.png" alt="Get it on Google Play" width={180} height={63} />
```

Next.js Metadata itunes field:
```typescript
import type { Metadata } from 'next';
export const metadata: Metadata = {
  itunes: { appId: '6749815073' },
};
// Generates: <meta name="apple-itunes-app" content="app-id=6749815073">
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create reusable AppStoreBadges component</name>
  <files>
    src/components/AppStoreBadges/AppStoreBadges.tsx
    src/components/AppStoreBadges/AppStoreBadges.module.css
    src/components/AppStoreBadges/index.ts
  </files>
  <action>
Create a reusable `AppStoreBadges` component following the project's component folder convention (ComponentName/ComponentName.tsx + .module.css + index.ts).

**AppStoreBadges.tsx:**
- Import `Image` from `next/image`, `APP_STORE_LINK` and `GOOGLE_PLAY_LINK` from `@/constants/links`, and styles from `./AppStoreBadges.module.css`
- Accept an optional `className?: string` prop for parent layout control
- Render a `<div>` with `styles.badges` class (merged with `className` prop if provided — use template literal with `.trim()`)
- Inside the div, render two `<a>` tags:
  - First: `href={APP_STORE_LINK}`, `target="_blank"`, `rel="noopener noreferrer"`, wrapping `<Image src="/app-store-badge.svg" alt="Download on the App Store" width={180} height={63} />`
  - Second: `href={GOOGLE_PLAY_LINK}`, `target="_blank"`, `rel="noopener noreferrer"`, wrapping `<Image src="/google-play-badge.png" alt="Get it on Google Play" width={180} height={63} />`
- Use `default export` (project convention)
- Do NOT add `"use client"` — this component is a server component (no state, no hooks, no event handlers)

**AppStoreBadges.module.css:**
- `.badges` — `display: flex; gap: 16px; align-items: center; flex-wrap: wrap;`
- `.badges a` — no text-decoration, display: inline-flex (prevents extra whitespace under images)

**index.ts:**
- `export { default } from './AppStoreBadges';`
  </action>
  <verify>
    <automated>cd /Users/jacobfinn/Desktop/Projects/streetfeast-website-fe && npx tsc --noEmit src/components/AppStoreBadges/AppStoreBadges.tsx 2>&1 | head -20 && npm run lint 2>&1 | tail -5</automated>
  </verify>
  <done>AppStoreBadges component exists with barrel export, renders both badge images as links to correct store URLs, passes TypeScript and lint checks, contains no "use client" directive</done>
</task>

<task type="auto">
  <name>Task 2: Create /download page with metadata and styles</name>
  <files>
    src/app/download/page.tsx
    src/app/download/page.module.css
  </files>
  <action>
Create the `/download` route as a pure server component page — NO `"use client"`, NO hooks, NO event handlers.

**page.tsx:**
- Import `type { Metadata }` from `next`, `Image` from `next/image`, `AppStoreBadges` from `@/components/AppStoreBadges`, and styles from `./page.module.css`
- Export `metadata` constant of type `Metadata`:
  ```typescript
  export const metadata: Metadata = {
    title: 'Download StreetFeast',
    description: 'Download the StreetFeast app to discover food trucks and street vendors near you.',
    itunes: {
      appId: '6749815073',
    },
  };
  ```
  The `itunes.appId` field generates `<meta name="apple-itunes-app" content="app-id=6749815073">` in the server-rendered HTML head. This MUST be exported from the page file (not layout) so it applies only to /download. Safari only reads this tag from initial server HTML — client-side injection is silently ignored.
- Export default `DownloadPage` function component rendering:
  - `<main className={styles.main}>` as the root element
  - `<div className={styles.content}>` containing:
    - StreetFeast logo: `<Image src="/logowithtext.png" alt="StreetFeast" width={200} height={60} priority />` wrapped in `<div className={styles.logo}>`
    - `<h1 className={styles.heading}>Get the StreetFeast App</h1>`
    - `<p className={styles.subheading}>Discover food trucks and street vendors near you.</p>`
    - `<AppStoreBadges className={styles.badges} />`
- Do NOT include Header or Footer components — this is a standalone minimal page per PAGE-01 ("minimal page")
- Do NOT import or use anything from Zustand stores, browser APIs, or React hooks

**page.module.css:**
- `.main` — `display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 24px; background-color: #FCFCFC;` (uses Colors.main.white)
- `.content` — `display: flex; flex-direction: column; align-items: center; text-align: center; max-width: 480px; gap: 24px;`
- `.logo` — `margin-bottom: 8px;`
- `.heading` — `font-size: 2rem; font-weight: 700; color: #1E1E1F; margin: 0;` (uses Colors.primary[4], inherits --font-lexend from root layout)
- `.subheading` — `font-size: 1.125rem; color: #636363; margin: 0; line-height: 1.5;` (uses Colors.primary[3])
- `.badges` — `margin-top: 8px;` (additional spacing; the component's internal flex layout handles badge arrangement)
- Add a responsive breakpoint `@media (max-width: 480px)` that:
  - Reduces `.heading` font-size to `1.5rem`
  - Sets `.badges` to `flex-direction: column; align-items: center;` (stack badges vertically on very small screens — these are non-redirected desktop users but some may resize)
  </action>
  <verify>
    <automated>cd /Users/jacobfinn/Desktop/Projects/streetfeast-website-fe && npm run build 2>&1 | tail -20 && npm run lint 2>&1 | tail -5</automated>
  </verify>
  <done>/download route renders a branded page with logo, heading, subheading, and both store badges; build passes without errors proving it is a valid server component; metadata export includes itunes.appId generating the Smart App Banner meta tag; lint passes</done>
</task>

</tasks>

<verification>
1. `npm run build` passes — confirms page.tsx is a valid server component with no client-only APIs
2. `npm run lint` passes — no ESLint errors
3. View page source at /download (or build output) contains `<meta name="apple-itunes-app" content="app-id=6749815073">`
4. No `"use client"` directive exists in page.tsx or AppStoreBadges.tsx
5. Both badge links point to correct store URLs from constants/links.ts
</verification>

<success_criteria>
- Desktop user visiting /download sees StreetFeast logo, heading, and both app store badges
- Clicking either badge opens the correct app store in a new tab
- Page has Apple Smart App Banner meta tag for iOS Safari
- Page builds as a pure server component with zero client JavaScript
- AppStoreBadges component is reusable and importable from @/components/AppStoreBadges
</success_criteria>

<output>
After completion, create `.planning/phases/05-fallback-page-component/05-01-SUMMARY.md`
</output>
